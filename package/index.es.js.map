{"version":3,"file":"index.es.js","sources":["../index.js"],"sourcesContent":["import { createFilter, dataToEsm } from '@rollup/pluginutils'\nimport stripJsonComments from 'strip-json-comments'\n\n/**\n * This was lifted from @rollup/plugin-json with the exception\n * of strip-json-comments and a minor addition to the options.\n *\n * @see https://github.com/rollup/plugins/blob/master/packages/json/\n * @export\n * @param {object} [options={}]\n * @returns\n */\nexport default function jsonc(options = {}) {\n\n  const filter = createFilter(options.include, options.exclude)\n  const indent = 'indent' in options ? options.indent : '\\t'\n  const jsonc = 'jsonc' in options ? options.jsonc : true\n\n  return {\n    name: 'rollup-plugin-jsonc',\n    transform(json, id) {\n\n      if (!['jsonc', '.json'].includes(id.slice(-5)) || !filter(id)) return null\n\n      const strip = jsonc ? stripJsonComments(json, { whitespace: false }) : json\n\n      return {\n        code: dataToEsm(JSON.parse(strip), {\n          preferConst: options.preferConst,\n          compact: options.compact,\n          namedExports: options.namedExports,\n          indent\n        }),\n        map: { mappings: '' }\n      }\n    }\n  }\n}\n"],"names":["options","const","filter","createFilter","include","exclude","indent","jsonc","name","transform","json","id","includes","slice","strip","stripJsonComments","whitespace","code","dataToEsm","JSON","parse","preferConst","compact","namedExports","map","mappings"],"mappings":"oHAYe,SAAeA,kBAAU,IAEtCC,IAAMC,EAASC,EAAaH,EAAQI,QAASJ,EAAQK,SAC/CC,EAAS,WAAYN,EAAUA,EAAQM,OAAS,KAChDC,IAAQ,UAAWP,IAAUA,EAAQO,MAE3C,MAAO,CACLC,KAAM,sBACNC,mBAAUC,EAAMC,GAEd,IAAK,CAAC,QAAS,SAASC,SAASD,EAAGE,OAAO,MAAQX,EAAOS,GAAK,OAAO,KAEtEV,IAAMa,EAAQP,EAAQQ,EAAkBL,EAAM,CAAEM,YAAY,IAAWN,EAEvE,MAAO,CACLO,KAAMC,EAAUC,KAAKC,MAAMN,GAAQ,CACjCO,YAAarB,EAAQqB,YACrBC,QAAStB,EAAQsB,QACjBC,aAAcvB,EAAQuB,oBACtBjB,IAEFkB,IAAK,CAAEC,SAAU"}